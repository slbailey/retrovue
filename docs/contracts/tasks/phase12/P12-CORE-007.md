Task ID: P12-CORE-007
Rule ID: INV-LIVE-SESSION-AUTHORITY-001
Governing Law: LAW-AUTHORITY-HIERARCHY
Subsystem: ChannelManager
Task Type: FIX
File(s) to Modify: pkg/core/src/retrovue/runtime/channel_manager.py
Owner: Core
Blocked By: P12-CORE-001

Instructions:
- Add `is_live` property that returns True only when `_boundary_state == LIVE`
- All external liveness queries must use this property
- Update any existing liveness checks to use this property

---

Governing Principle (LAW-AUTHORITY-HIERARCHY):
> Clock authority supersedes frame completion for switch execution.

Rule Definition (INV-LIVE-SESSION-AUTHORITY-001):
A channel is durably live only when `_boundary_state == LIVE`. Before LIVE, session is provisional. Only after LIVE is session stable.

Implementation:

1. Add property to ChannelManager:
   ```
   @property
   def is_live(self) -> bool:
       """INV-LIVE-SESSION-AUTHORITY-001: True only when durably live."""
       return self._boundary_state == BoundaryState.LIVE
   ```

2. Audit existing code for liveness assumptions:
   - Any code checking "is channel running" should use `is_live`
   - Metrics/logging that report "channel live" should use `is_live`
   - EPG status reporting should use `is_live`

3. Document semantics clearly:
   - `is_live == False` does NOT mean channel is stopped
   - `is_live == False` means session is provisional or dead
   - Use `_boundary_state` directly for finer-grained state queries

Constraints:
- `FAILED_TERMINAL` is NOT live (session is dead)
- `SWITCH_ISSUED` is NOT live (session is provisional)
- `NONE` is NOT live (no session)
- Only `LIVE` is live

Edge Cases:
- Channel in `PLANNED` state: not live (preparing for live)
- Channel in `SWITCH_ISSUED` state: not live (transitioning to live)
- Channel that was live then failed: not live (was live, now dead)

Done Criteria:
`is_live` property exists and returns correct value for all boundary states; external liveness queries use this property.

---

## Completion

**Completed:** 2025-02-02

**Changes (pkg/core/src/retrovue/runtime/channel_manager.py):**
- Added `is_live` property: returns `self._boundary_state == BoundaryState.LIVE`. Docstring documents INV-LIVE-SESSION-AUTHORITY-001: durably live only when LIVE; is_live == False means provisional or dead, not necessarily stopped.
- No existing liveness checks were found that needed changing (producer_status / health are separate; boundary state is the authority for "session live").
