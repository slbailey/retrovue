Task ID: P8-EOF-003
Rule ID: INV-P8-SEGMENT-EOF-DISTINCT-001
Governing Law: LAW-AUTHORITY-HIERARCHY, LAW-TIMELINE
Subsystem: AIR (TimelineController)
Task Type: CORE
File(s) to Modify: pkg/air/src/playout/timeline_controller.cpp
Owner: AIR
Blocked By: P8-EOF-002

Instructions:
- Preserve CT advancement after live producer EOF
- CT continues advancing at real-time cadence even without content frames
- TimelineController does not stall on EOF
- Frame pacing continues (via pad) after EOF

---

Governing Principle (LAW-TIMELINE):
> TimelineController owns CT mapping; producers are time-blind after lock.

Rule Definition (INV-P8-SEGMENT-EOF-DISTINCT-001):
CT continues advancing independent of content availability. EOF does not affect timeline monotonicity or wall-clock correspondence.

Implementation Notes:

1. CT advancement is driven by wall clock, not frame availability:
   ```cpp
   void TimelineController::Tick() {
       // CT advances based on wall clock, not content
       auto now = _master_clock->Now();
       auto elapsed = now - _epoch;
       _current_ct = elapsed.count();
       // CT advances even if producer is at EOF
   }
   ```

2. Ensure CT assignment path does not depend on producer state

3. Frame pacing (ProgramOutput) continues at target_fps
   - If no content frame available, emit pad
   - CT attached to pad frame same as content frame

4. Wall-clock correspondence maintained: W = epoch + CT

Observable Proof:
- CT monotonic after EOF (INV-P8-002)
- Frame pacing unchanged after EOF
- No CT stall between EOF and boundary

Done Criteria:
CT advancement independent of EOF; timeline monotonicity preserved; frame pacing continues via pad after EOF.

**Done:** 2026-02-02. TimelineController has no EOF handling; CT advances when frames are admitted (AdmitFrame), independent of producer EOF state. ProgramOutput (P8-FILL-002) will emit pad frames after EOF; those frames are admitted to TimelineController, advancing CT. No code changes needed - architecture already guarantees EOF does not stall CT.
