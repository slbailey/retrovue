Task ID: P11C-001
Rule ID: INV-BOUNDARY-DECLARED-001
Subsystem: Proto
Task Type: PROTO
File(s) to Modify: protos/playout.proto
Owner: Proto

Instructions:
- Add `target_boundary_time_ms` field to legacy switch RPCRequest
- This enables Core to declare the intended switch time to AIR

---

Rule Definition:
legacy switch RPC MUST include `target_boundary_time_ms` parameter; Core declares intent, AIR executes at that time.

Proto Change:
```protobuf
message legacy switch RPCRequest {
  int64 channel_id = 1;
  string plan_handle = 2;
  int64 target_boundary_time_ms = 3;  // NEW: wall-clock ms when switch should occur
}
```

Field Semantics:
- Value: Unix epoch milliseconds of the scheduled grid boundary
- Required: Yes (enforce in Phase 11D; optional for backward compat in 11C)
- Default: 0 (indicates "immediate" for backward compatibility)

Example Values:
- `target_boundary_time_ms = 1738340400000` → switch at exactly 2026-02-01 00:00:00.000 UTC
- `target_boundary_time_ms = 0` → switch immediately (legacy behavior)

Migration Notes:
- Until Phase 11D, AIR ignores this field (logs only)
- Core should start sending this field immediately
- Field value of 0 preserves current behavior

Constraints:
- Do NOT change existing field numbers
- Maintain backward compatibility
- Add to both request message

Done Criteria:
Proto includes target_boundary_time_ms field; stubs regenerated.

---

Completion (2026-02-01): legacy switch RPCRequest.target_boundary_time_ms=2 and legacy switch RPCResponse.switch_completion_time_ms=6 added; C++ and Python stubs regenerated.
