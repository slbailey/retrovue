Task ID: P11A-004
Rule ID: INV-AUDIO-SAMPLE-CONTINUITY-001
Subsystem: FileProducer, FrameRingBuffer
Task Type: TEST
File(s) to Modify: pkg/air/tests/contracts/Phase11AudioContinuityTests.cpp (new file)
Owner: AIR
Blocked By: P11A-003

Instructions:
- Create contract test proving audio samples are never dropped under backpressure
- Test must exercise queue full condition
- Test must verify no drops occur

---

Rule Definition:
Audio sample continuity MUST be preserved during normal operation. Audio samples MUST NOT be dropped due to queue backpressure.

Test Scenario:
TEST_INV_AUDIO_SAMPLE_CONTINUITY_001_NoDropsUnderBackpressure

- Given: FileProducer decoding audio at rate faster than consumer
- And: Audio queue reaches capacity
- When: Producer attempts to push additional audio frame
- Then: Producer blocks (does not drop frame)
- And: When consumer frees a slot, producer resumes
- And: All audio samples are accounted for (none dropped)

Assertions Required:
1. audio_frames_produced == audio_frames_consumed (no loss)
2. No INV-AUDIO-SAMPLE-CONTINUITY-001 VIOLATION logs emitted
3. Backpressure event is logged (producer blocked then released)

Test Setup:
- Configure consumer to be artificially slow
- Track audio frame counts at producer and consumer
- Run for sufficient duration to trigger backpressure multiple times

Constraints:
- Use existing test harness patterns
- Do not use real-time sleeps; use controlled timing
- Test must complete in <5 seconds

Done Criteria:
Test passes asserting zero audio sample drops during backpressure conditions.

---

Completion (2026-02-01): Phase11AudioContinuityTests.cpp added; TEST_INV_AUDIO_SAMPLE_CONTINUITY_001_NoDropsUnderBackpressure passes.
