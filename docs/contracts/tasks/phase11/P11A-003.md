Task ID: P11A-003
Rule ID: INV-AUDIO-SAMPLE-CONTINUITY-001
Subsystem: FileProducer, FrameRingBuffer
Task Type: FIX
File(s) to Modify: pkg/air/src/producers/file/FileProducer.cpp, pkg/air/src/buffers/FrameRingBuffer.cpp
Owner: AIR
Blocked By: P11A-002

Instructions:
- Implement audio queue overflow â†’ producer throttle behavior
- Audio samples MUST NOT be dropped; producer MUST block/wait instead
- Ensure audio and video throttling remain symmetric

---

Rule Definition:
Audio sample continuity MUST be preserved during normal operation. Audio samples MUST NOT be dropped due to queue backpressure. Queue overflow MUST trigger producer throttling, not sample loss.

Implementation Requirements:

1. When audio queue is full:
   - Producer MUST wait for space (blocking or yielding)
   - Producer MUST NOT drop the audio frame
   - Video MUST also be throttled symmetrically (per INV-P10-BACKPRESSURE-SYMMETRIC)

2. Throttle mechanism:
   - Use existing RULE-P10-DECODE-GATE pattern (slot-based gating)
   - Block at capacity, unblock when one slot frees
   - Do NOT use hysteresis (no low-water mark)

3. Logging:
   - Log when audio throttle activates: `[FileProducer] Audio backpressure: blocking at queue capacity`
   - Log when audio throttle releases: `[FileProducer] Audio backpressure: released`

Constraints:
- Must not introduce deadlock between audio and video
- Must preserve A/V sync
- Must use existing backpressure patterns from video path

Done Criteria:
Audio queue overflow causes producer to block/wait; no audio samples are ever dropped due to backpressure.
