Task ID: P1-FP-001
Rule ID: INV-P10-AUDIO-VIDEO-GATE
Subsystem: FileProducer
Task Type: LOG
File(s) to Modify: pkg/air/src/producers/file/FileProducer.cpp
Test or Log Name: INV-P10-AUDIO-VIDEO-GATE init log

Instructions:
- Implement exactly one atomic task
- Modify ONLY the listed file(s)
- Do not refactor
- Do not add tests unless explicitly requested
- Do not change production behavior
- Stop immediately after log is added

---

Rule Definition:
When a segment's video epoch is established (VIDEO_EPOCH_SET), the first audio frame MUST be queued within 100ms. This complements INV-P8-AV-SYNC.

Log Specification:
When video epoch is set, log the start of the 100ms audio deadline window.

Log Format:
```
[FileProducer] INV-P10-AUDIO-VIDEO-GATE: Video epoch set, awaiting first audio (deadline=100ms)
```

Log Level: INFO (significant operational event)

Location:
At the point where VIDEO_EPOCH_SET is logged (look for existing "VIDEO_EPOCH_SET first_mt_pts_us=" log). Add this log immediately after.

Required Fields:
- deadline: always 100ms (constant for now)

Constraints:
- Add exactly one log statement
- Store video epoch timestamp for use by P1-FP-002 and P1-FP-003
- Do not modify control flow
- Do not add metrics
- Use existing logging macros/patterns in the codebase

Done Criteria:
Log `INV-P10-AUDIO-VIDEO-GATE: Video epoch set, awaiting first audio (deadline=100ms)` emitted at VIDEO_EPOCH_SET.

---

## Completion

- **Status:** Done
- **Completed:** 2026-02-01
- **Implementation:** Log and video epoch timestamp storage added in `FileProducer.cpp` immediately after existing VIDEO_EPOCH_SET log; timestamp stored in `g_video_epoch_time` for P1-FP-002/P1-FP-003.
