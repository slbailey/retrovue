Task ID: P1-FP-002
Rule ID: INV-P10-AUDIO-VIDEO-GATE
Subsystem: FileProducer
Task Type: LOG
File(s) to Modify: pkg/air/src/producers/file/FileProducer.cpp
Test or Log Name: INV-P10-AUDIO-VIDEO-GATE success log

Instructions:
- Implement exactly one atomic task
- Modify ONLY the listed file(s)
- Do not refactor
- Do not add tests unless explicitly requested
- Do not change production behavior
- Stop immediately after log is added

---

Rule Definition:
When a segment's video epoch is established, the first audio frame MUST be queued within 100ms.

Log Specification:
When the first audio frame is queued after video epoch, log success with elapsed time.

Log Format:
```
[FileProducer] INV-P10-AUDIO-VIDEO-GATE: First audio queued at %dms after video epoch
```

Log Level: INFO (significant operational event)

Location:
At the point where the first audio frame is pushed to the audio queue after video epoch is set. Calculate elapsed time from video epoch timestamp stored in P1-FP-001.

Required Fields:
- elapsed_ms: time from video epoch set to first audio queued

Constraints:
- Add exactly one log statement
- Requires video epoch timestamp from P1-FP-001
- Only log if elapsed_ms <= 100
- Only log once per segment (use flag)
- Do not modify control flow
- Use existing logging macros/patterns in the codebase

Done Criteria:
Log `INV-P10-AUDIO-VIDEO-GATE: First audio queued at {X}ms after video epoch` emitted when audio arrives within deadline.

---

## Completion

- **Status:** Done
- **Completed:** 2026-02-01
- **Implementation:** Log added in `FileProducer.cpp` AUDIO_UNGATED block; elapsed_ms from `g_video_epoch_time`; log only if elapsed_ms <= 100; logged once per segment via `audio_ungated_logged_`.
