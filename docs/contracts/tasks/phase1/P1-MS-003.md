Task ID: P1-MS-003
Rule ID: LAW-VIDEO-DECODABILITY
Subsystem: MpegTSOutputSink
Task Type: VERIFY
File(s) to Modify: (none - verification only)
Test or Log Name: N/A

Instructions:
- This is a VERIFY task - no code changes required
- Review existing test coverage
- Document findings
- Report whether verification passes or fails

---

Rule Definition:
Every segment starts with IDR; real content gates pad; AIR owns keyframes. The TS output must be decodable by standard players (VLC, ffplay).

Verification Checklist:
1. [x] Locate existing tests for video decodability / IDR-first — Phase84PersistentMpegTsMuxTests.cpp; MpegTSPlayoutSinkContractTests.cpp
2. [x] Confirm test verifies first video frame in TS is IDR — Phase84: INV_AIR_IDR_BEFORE_OUTPUT_FirstVideoPacketIsIdr
3. [x] Confirm test verifies TS packets have valid sync byte (0x47) — Phase84: TsValidity_188AndSync; Contract: FE-023, helpers
4. [x] Confirm test verifies TS packet size is 188 bytes — Phase84: TsValidity_188AndSync; Contract: FE-023
5. [x] Confirm test parses PAT/PMT successfully — Phase84: TsValidity_ParsePatAndPmtSuccessfully

Files to Review:
- pkg/air/tests/contracts/Phase84PersistentMpegTsMuxTests.cpp
- pkg/air/tests/contracts/MpegTSPlayoutSink/MpegTSPlayoutSinkContractTests.cpp

Expected Evidence:
- Test named like "TsValidity" or "Decodable" or "IDR" — TsValidity_PacketSize188AndSyncByte0x47, INV_AIR_IDR_BEFORE_OUTPUT_FirstVideoPacketIsIdr
- Assertion checking packet[0] == 0x47 — TsValidity_188AndSync; FE-023
- Assertion checking packet size == 188 — TsValidity_188AndSync; FE-023
- Assertion that PAT/PMT can be parsed — TsValidity_ParsePatAndPmtSuccessfully
- Assertion that first video frame is keyframe/IDR — FirstVideoPacketIsKeyframe(); INV_AIR_IDR_BEFORE_OUTPUT_GateResetsOnSegmentSwitch

Done Criteria:
Confirmed: test asserts IDR present at segment boundary, TS valid with 0x47 sync.

Verification Result: PASS. No follow-up task. Phase84 has TsValidity_PacketSize188AndSyncByte0x47, TsValidity_ParsePatAndPmtSuccessfully, INV_AIR_IDR_BEFORE_OUTPUT_FirstVideoPacketIsIdr, INV_AIR_IDR_BEFORE_OUTPUT_GateResetsOnSegmentSwitch. Contract tests add FE-023 (188/0x47 alignment), FE-015 (FFprobe decodable).

If Verification Fails:
Create follow-up task to add missing TS validity or IDR-first test.
