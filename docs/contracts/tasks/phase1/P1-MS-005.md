Task ID: P1-MS-005
Rule ID: INV-P9-TS-EMISSION-LIVENESS
Subsystem: MpegTSOutputSink
Task Type: LOG
File(s) to Modify: pkg/air/src/output/MpegTSOutputSink.cpp
Test or Log Name: INV-P9-TS-EMISSION-LIVENESS success log

Instructions:
- Implement exactly one atomic task
- Modify ONLY the listed file(s)
- Do not refactor
- Do not add tests unless explicitly requested
- Do not change production behavior
- Stop immediately after log is added

---

Rule Definition:
First decodable TS packet MUST be emitted within 500ms of PCR-PACE timing initialization.

Log Specification:
When the first TS bytes are written within the 500ms deadline, log success with elapsed time.

Log Format:
```
[MpegTSOutputSink] INV-P9-TS-EMISSION-LIVENESS: First TS emitted at %dms (OK)
```

Log Level: INFO (significant operational event)

Location:
At the point where first TS bytes are written to output (look for existing "First decodable TS emitted" or AVIO_WRITE logs). Calculate elapsed time from PCR-PACE init timestamp stored in P1-MS-004.

Required Fields:
- elapsed_ms: time from PCR-PACE init to first TS bytes written

Constraints:
- Add exactly one log statement
- Requires PCR-PACE init timestamp from P1-MS-004
- Only log if elapsed_ms <= 500
- Do not modify control flow
- Use existing logging macros/patterns in the codebase

Done Criteria:
Log `INV-P9-TS-EMISSION-LIVENESS: First TS emitted at {X}ms (OK)` emitted when first TS written within deadline.

---

## Completion

- **Status:** Done
- **Completed:** 2026-02-01
- **Implementation:** Log added in `WriteToFdCallback` when first packet is written; elapsed_ms computed from `g_pcr_pace_init_time`; log only if elapsed_ms <= 500.
