Task ID: P1-PO-001
Rule ID: INV-STARVATION-FAILSAFE-001
Subsystem: ProgramOutput
Task Type: TEST
File(s) to Modify: pkg/air/tests/contracts/PrimitiveInvariants/PacingInvariantContractTests.cpp
Test or Log Name: TEST_INV_STARVATION_FAILSAFE_001

Instructions:
- Implement exactly one atomic task
- Modify ONLY the listed file(s)
- Do not refactor
- Do not add logs unless explicitly requested
- Do not change production behavior unless task type = FIX
- Stop immediately after task passes

---

Rule Definition:
When the ProgramOutput buffer remains empty for longer than one frame duration, the render loop must emit a pad frame within a bounded time (â‰¤100ms).

Test Scenario:
- Given: ProgramOutput running with no frames in its buffer
- And: Buffer remains empty for >1 frame duration
- When: The render loop advances
- Then: A pad frame is emitted
- And: Pad emission occurs within 100ms of starvation detection

Assertions Required:
1. Starvation detection timestamp is captured
2. Pad emission timestamp is captured
3. (pad_time - starvation_time) <= 100ms

Constraints:
- Use existing test harness patterns
- Do not modify ProgramOutput implementation
- Do not relax timing thresholds
- Do not introduce sleeps longer than required for determinism
- If timing requires a fake or controlled clock, use existing mechanisms only

Done Criteria:
Test asserts pad frame emitted within 100ms of buffer starvation detection.
